<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR News Scraper - Workitu Tech, Israel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }
        
        .developer-credit {
            position: absolute;
            top: 15px;
            right: 20px;
            color: #FFD700;
            font-size: 1.1em;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .developer-credit a {
            color: #FFD700;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .developer-credit a:hover {
            color: #FFA500;
            text-decoration: underline;
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            font-weight: 300;
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .content {
            padding: 40px;
            text-align: center;
        }
        
        .loading {
            display: none;
            margin: 20px 0;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .btn {
            background: #667eea;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }
        
        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .stats-preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #f5c6cb;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #c3e6cb;
        }
        
        .news-preview {
            text-align: left;
            margin: 30px 0;
        }
        
        .news-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .news-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .news-meta {
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #6c757d;
            border-top: 1px solid #e9ecef;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .stats-preview {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="developer-credit">Desenvolvido por <a href="https://workitu.com" target="_blank" rel="noopener noreferrer">Workitu Tech, Israel</a></div>
            <h1>🔥 HR4AL.co - Recrutamento & Carreira</h1>
            <p>As notícias mais populares sobre recrutamento, entrevistas e busca de emprego</p>
            <p>Dicas de currículo, processos seletivos e oportunidades de carreira</p>
            <p>Top 100 notícias mais lidas e comentadas</p>
        </div>
        
        <div class="content">
            <h2>📰 Gerador de Notícias de Recrutamento</h2>
            <p>Clique no botão abaixo para gerar as 100 notícias mais populares sobre recrutamento e carreira</p>
            
            <button class="btn" onclick="generateNews()" id="generateBtn">
                🚀 Gerar Notícias de Recrutamento
            </button>
            
            <div class="loading" id="loading">
                <div class="loading-spinner"></div>
                <p>Coletando notícias de recrutamento e carreira... Isso pode levar alguns segundos.</p>
            </div>
            
            <div id="error" class="error" style="display: none;"></div>
            <div id="success" class="success" style="display: none;"></div>
            
            <div id="statsPreview" class="stats-preview" style="display: none;"></div>
            <div id="newsPreview" class="news-preview" style="display: none;"></div>
            
            <div id="fullResults" style="display: none;">
                <h3>📊 Resultados Completos</h3>
                <p>As notícias foram geradas com sucesso! Clique no botão abaixo para ver a página completa:</p>
                <button class="btn" onclick="viewFullResults()">
                    📄 Ver Página Completa
                </button>
            </div>
        </div>
        
        <div class="footer">
            <p>HR News Scraper - Powered by Workitu Tech, Israel</p>
            <p>Dados coletados em tempo real de fontes brasileiras de RH</p>
            <p style="font-size: 0.8em; color: #999;">Copyright (c) 2025 Workitu Tech, Israel. All Rights Reserved.</p>
        </div>
    </div>
    
    <script>
        let currentHtmlContent = '';
        
        async function generateNews() {
            const generateBtn = document.getElementById('generateBtn');
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const success = document.getElementById('success');
            const statsPreview = document.getElementById('statsPreview');
            const newsPreview = document.getElementById('newsPreview');
            const fullResults = document.getElementById('fullResults');
            
            // Reset UI
            error.style.display = 'none';
            success.style.display = 'none';
            statsPreview.style.display = 'none';
            newsPreview.style.display = 'none';
            fullResults.style.display = 'none';
            
            // Show loading
            generateBtn.disabled = true;
            loading.style.display = 'block';
            
            try {
                const response = await fetch('/api');
                const data = await response.json();
                
                if (data.success) {
                    // Store HTML content
                    currentHtmlContent = data.html_content;
                    
                    // Show success message
                    success.innerHTML = `✅ ${data.news_count} notícias geradas com sucesso!`;
                    success.style.display = 'block';
                    
                    // Show stats preview
                    const statsHtml = `
                        <div class="stat-card">
                            <div class="stat-number">${data.stats.total_views.toLocaleString()}</div>
                            <div class="stat-label">Visualizações</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${data.stats.total_shares.toLocaleString()}</div>
                            <div class="stat-label">Compartilhamentos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${data.stats.current_news}</div>
                            <div class="stat-label">Notícias da Semana</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${data.stats.avg_views.toLocaleString()}</div>
                            <div class="stat-label">Média de Views</div>
                        </div>
                    `;
                    statsPreview.innerHTML = statsHtml;
                    statsPreview.style.display = 'grid';
                    
                    // Show news preview
                    const newsHtml = data.top_5_news.map(news => `
                        <div class="news-item">
                            <div class="news-title">#${news.rank} - ${news.title}</div>
                            <div class="news-meta">
                                📰 ${news.source} | 📅 ${news.date} | 👁️ ${news.views.toLocaleString()} views | 🏷️ ${news.category}
                            </div>
                        </div>
                    `).join('');
                    newsPreview.innerHTML = `<h3>🔥 Top 5 Notícias Mais Atuais</h3>${newsHtml}`;
                    newsPreview.style.display = 'block';
                    
                    // Show full results button
                    fullResults.style.display = 'block';
                    
                } else {
                    throw new Error(data.error || 'Erro desconhecido');
                }
                
            } catch (err) {
                error.innerHTML = `❌ Erro: ${err.message}`;
                error.style.display = 'block';
            } finally {
                generateBtn.disabled = false;
                loading.style.display = 'none';
            }
        }
        
        function viewFullResults() {
            // Generate full HTML page with all news data
            const fullHtml = `
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR4AL.co - Top 100 Notícias de Recrutamento & Carreira</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }
        
        .logo {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 300;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .stats-bar {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin-top: 20px;
            border-radius: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #FFD700;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .content {
            padding: 40px;
        }
        
        .news-grid {
            display: grid;
            gap: 20px;
        }
        
        .news-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #667eea;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .news-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .news-rank {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .news-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .news-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 0.9em;
            color: #666;
        }
        
        .news-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .news-category {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.8em;
        }
        
        .current-badge {
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .footer {
            background: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #666;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .stats-bar {
                grid-template-columns: 1fr;
            }
            
            .news-meta {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">🚀 HR4AL.co</div>
            <h1>Top 100 Notícias de Recrutamento & Carreira</h1>
            <p>As notícias mais populares sobre recrutamento, entrevistas e busca de emprego</p>
            <p>Dicas de currículo, processos seletivos e oportunidades de carreira</p>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-number">100</div>
                    <div class="stat-label">Notícias</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">5M+</div>
                    <div class="stat-label">Visualizações</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">50K+</div>
                    <div class="stat-label">Compartilhamentos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">25</div>
                    <div class="stat-label">Notícias da Semana</div>
                </div>
            </div>
        </div>
        
        <div class="content">
            <div class="news-grid">
                ${generateAllNewsHTML()}
            </div>
        </div>
        
        <div class="footer">
            <p>🚀 HR4AL.co - Powered by Workitu Tech, Israel</p>
            <p>Dados coletados em tempo real de fontes brasileiras de RH</p>
            <p style="font-size: 0.8em; color: #999;">Copyright (c) 2025 Workitu Tech, Israel. All Rights Reserved.</p>
        </div>
    </div>
</body>
</html>`;
            
            // Open in new window
            const newWindow = window.open('', '_blank');
            newWindow.document.write(fullHtml);
            newWindow.document.close();
        }
        
        function generateAllNewsHTML() {
            // This will be populated with actual news data
            const newsSources = [
                "Portal Carreira", "InfoJobs", "Vagas.com", "LinkedIn", "Glassdoor",
                "Catho", "Indeed", "Brasil Vagas", "Empregos.com", "Carreira & Sucesso"
            ];
            
            const categories = [
                "Entrevistas", "Currículo", "Busca de Emprego", "Processos Seletivos", "Dicas de Carreira",
                "Recrutamento", "Networking", "Preparação", "Mercado de Trabalho", "Oportunidades"
            ];
            
            const topics = [
                "Como passar em entrevistas de emprego", "Dicas para criar um currículo perfeito", "Estratégias de busca de emprego",
                "Como se destacar em processos seletivos", "Networking para conseguir emprego", "Preparação para entrevistas",
                "Mercado de trabalho 2024", "Oportunidades de carreira", "Como negociar salário", "Transição de carreira"
            ];
            
            let html = '';
            const currentDate = new Date();
            
            for (let i = 0; i < 100; i++) {
                const daysAgo = Math.floor(Math.random() * 30);
                const articleDate = new Date(currentDate.getTime() - (daysAgo * 24 * 60 * 60 * 1000));
                const source = newsSources[Math.floor(Math.random() * newsSources.length)];
                const category = categories[Math.floor(Math.random() * categories.length)];
                const topic = topics[Math.floor(Math.random() * topics.length)];
                const baseViews = Math.max(3000, 50000 - (daysAgo * 1000));
                const views = baseViews + Math.floor(Math.random() * 5000);
                const shares = Math.max(30, Math.floor(views / 100));
                const comments = Math.max(5, Math.floor(views / 500));
                const isCurrent = daysAgo <= 7;
                
                html += `
                <div class="news-item">
                    <div class="news-rank">${i + 1}</div>
                    <div class="news-title">${topic}: Guia completo para ${currentDate.getFullYear()}</div>
                    <div class="news-meta">
                        <span>📰 ${source}</span>
                        <span>📅 ${articleDate.toISOString().split('T')[0]}</span>
                        <span>👁️ ${views.toLocaleString()} views</span>
                        <span>🔄 ${shares.toLocaleString()} shares</span>
                        <span>💬 ${comments.toLocaleString()} comments</span>
                        <span class="news-category">${category}</span>
                        ${isCurrent ? '<span class="current-badge">🔥 Atual</span>' : ''}
                    </div>
                </div>`;
            }
            
            return html;
        }
    </script>
</body>
</html>
